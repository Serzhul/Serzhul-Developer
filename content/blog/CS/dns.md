---
title: DNS
date: 2022-04-12 09:04:82
category: CS
thumbnail: { thumbnailSrc }
draft: false
---

# DNS

# DNS - 인터넷의 디렉터리 서비스

- 사람은 여러 가지 방법으로 자신을 식별할 수 있다.(이름, 주민번호, 운전면허번호 등)
- 이들 식별자는 사람을 구별하는데 사용할 수 있지만 특정 환경에서는 한 식별자가 다른 것보다 더 적합할 수 있다. (가령 사람은 이름으로 기억하기 쉽지만 국세청에서는 주민번호를 선호한다)
- 사람을 여러 가지 방법으로 식별하듯, 인터넷 호스트도 **호스트 네임(hostname)**이 있다.
  - 호스트 네임은 기억하기 쉬워 사용자가 좋아하지만, 호스트 네임은 그 **호스트 위치에 대한 정보를 거의 제공하지 않으며**, 가변 길이의 알파뉴메릭 문자로 구성되어 라우터가 처리하는 데 어려움이 있다. 이러한 이유로 호스트는 **IP주소**로도 식별된다.
  - IP 주소는 4바이트로 구성 되고 계층 구조를 갖는다. 0~255 십진수로 표현하는 각 바이트는 점으로 구분한다.

## DNS가 제공하는 서비스

- 사람이 호스트 네임을 선호하고 라우터는 IP 주소를 선호하기에 이런 선호 차이를 절충하기 위해 호스트 네임을 IP 주소로 변환해주는 디렉터리 서비스가 필요한 데 이것이 인터넷 DNS(Domain name system)의 주요 임무다.
- DNS는 DNS 서버들의 계층구조로 구현된 분산 데이터베이스이다.
- DNS는 호스트가 분산 데이터베이스로 질의하도록 허락하는 애플리케이션 계층 프로토콜이다.

### DNS 서비스 예시

어떤 사용자의 호스트에서 수행되는 브라우저가 URL [www.someschool.edu/index.html](http://www.someschool.edu/index.html)을 요청한다고 가정 (사용자 호스트는 HTTP 요청 메시지를 웹 서버로 보낼 수 있게 하기 위해 IP 주소를 얻어야 한다)

1. 같은 사용자 컴퓨터는 DNS 애플리케이션의 클라이언트 측을 수행한다.
2. 브라우저는 URL로부터 호스트 네임 www.someschool.edu를 추출하고 그 호스트 네임을 DNS 애플리케이션의 클라이언트 측에 넘긴다.
3. DNS 클라이언트는 DNS 서버로 호스트 네임을 포함하는 질의를 보낸다.
4. DNS 클라이언트는 결국 호스트 네임에 대한 IP 주소를 가진 응답을 받게 된다.
5. 브라우저가 DNS로부터 IP 주소를 받으면 브라우저는 그 IP 주소와 그 주소의 80번 포트에 위치하는 HTTP 서버 프로세스로 TCP 연결을 초기화한다.

### 그 외 DNS 서비스

- 호스트 엘리어싱(host aliasing): 복잡한 호스트 네임을 가진 호스트는 하나 이상의 별명을 가질 수 있다. (정식 호스트 네임을 별칭 호스트 네임으로 줄 수 있다.)
- 메일 서버 엘리어싱(mail server aliasing) : DNS는 호스트의 IP 주소 뿐만 아니라 제공된 별칭 호스트 네임에 대한 정식 호스트 네임을 얻기 위해 메일 애플리케이션에 의해 수행된다.
- 부하 분산(load distribution) : DNS는 중복 웹 서버 같은 여러 중복 서버 사이에 부할르 분산하기 위해서도 사용되고 있다.
  - 인기 있는 사이트는 여러 서버에 중복되어 있어서, 각 서버가 다른 종단 시스템에서 수행되고 다른 IP 주소를 갖는다.
  - 여러 IP 주소가 하나의 정식 호스트 네임과 연관되어 있으므로, DNS 데이터베이스는 IP 주소 집합을 갖고 있다. 클라이언트가 이러한 주소 집합으로 매핑하는 호스트 네임에 대한 DNS 질의를 하면 서버는 IP 주소 집합 전체를 갖고 응답하며, 각 응답에서의 주소는 순환식으로 보낸다. (순환식 응답 ⇒ 집합 내부의 첫 번째 IP 주소로 HTTP 요청 메시질르 보내므로 트래픽 분산 효과가 있음)

## DNS 동작 원리 개요

사용자의 호스트에서 실행되는 어떤 애플리케이션이 호스트 네임을 IP 주소로 변환시키려 한다고 가정

- 애플리케이션은 변환될 호스트 네임을 명시하여 DNS 측의 클라이언트를 호출한다.
- 사용자 호스트의 DNS는 네트워크에 질의 메시지를 보낸다.
- 모든 DNS 질의와 응답 메시지는 포트 53의 UDP 데이터그램으로 보내진다.
- 수 msec에서 수 sec의 지연 후에 사용자 호스트의 DNS는 요청한 매핑에 해당하는 DNS 응답 메시지를 받는다.

### DNS 구조

- DNS의 모든 매핑을 포함하는 중앙 집중 방식 서버를 생각해 볼 수 있는데 그 경우 다음과 같은 문제점을 갖는다.
  - 서버의 고장
  - 트래픽 양
  - 먼 거리 중앙 집중 데이터베이스
  - 유지관리
- 따라서 단일 DNS 서버에 있는 중앙 집중 데이터베이슨느 확장성이 전혀 없어 분산되도록 설계되었다.

### 분산 계층 데이터베이스

- 확장성 문제를 다루기 위해 DNS는 많은 서버를 이용하고 이들을 계층 형태로 구성하며 전 세계에 분산시킨다.
  - 루트 DNS 서버, 최상위 레벨 도메인 네임 DNS 서버, 책임 DNS 서버 3가지 유형으로 분류된다.
  - **루트 DNS 서버 :** 400 개 이상의 루트 DNS 서버가 있으며 대부분 북미지역에 위치한다.
  - **최상위 레벨 도메인(TLD) 서버** : com, org, net, edu 같은 상위 레벨 도메인과 kr, uk, fr, ca, jp 같은 모든 국가의 상위 레벨 도메인에 대한 TLD 서버가 있다.
  - **책임 DNS 서버** : 인터넷에서 접근하기 쉬운 호스트를 가진 모든 기관은 호스트 네임을 IP 주소로 매핑하는 공개적인 DNS 레코드를 제공해야 한다.
- 로컬 DNS 서버는 서버들의 계층 구조에 엄격하게 속하지는 않지만 DNS 구조에 중심에 있다.
  - ISP들은 로컬 DNS 서버를 가지며 호스트가 ISP로 연결될 때, 그 ISP는 로컬 DNS 서버로부터 IP 주소를 호스트에게 제공한다.

### DNS 캐싱

- DNS는 지연 성능 향상과 네트워크의 DNS 메시지 수를 줄이기 위해 캐싱을 사용한다.
  - 질의 사슬에서 DNS 서버가 DNS 응답을 받았을 때, 로컬 메모리에 대한 정보를 저장할 수 있다.

---

### 참고 문헌

James F.Kurose & Keith W.Ross. (2017). 표제 : 컴퓨터 네트워킹 하양식 접근 (제7판) (최종원, 강현국, 신용태, 안상현, 유영환 & 황호영 옮김). (퍼스트북)
